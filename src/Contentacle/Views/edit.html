<header>
    <div>
        <h1>
            <a href="{{_links.cont:user.href}}" rel="cont:user">{{username}}</a> /
            <a href="{{_links.cont:repo.href}}" rel="cont:repo">{{repo}}</a> /
            <a href="{{_links.cont:branch.href}}" rel="cont:branch">{{branch}}</a>
        </h1>
        {{#if _embedded.cont:commit}}
            <div class="commit-metadata">
                <a href="{{_embedded.cont:commit.0._links.author.href}}" rel="author">{{_embedded.cont:commit.0.author}}</a> wrote {{since _embedded.cont:commit.0.date}} - <a href="{{_embedded.cont:commit.0._links.self.href}}" rel="cont:commit">{{_embedded.cont:commit.0.message}}</a>
            </div>
        {{/if}}
    </div>
</header>
<form action="{{_links.self.href}}" method="post" id="commit-form">
    <input id="filename" type="text" name="filename" placeholder="filename" value="{{path}}">
    <textarea name="content" id="edit">{{content}}</textarea>
    <div id="preview">{{markdown content}}</div>
    <div id="commit">
        <h1>Commit</h1>
        <p>Some words about your changes.</p>
        <textarea name="message" placeholder="Update to {{path}}"></textarea>
        <button type="submit">Commit changes</button>
        <h2>Metadata</h2>
        {{#each metadata}}
            <label>
                <input type="text" name="metadata[name][{{@index}}]" value="{{capitalise @key}}" class="metadata-name">
                <input type="text" name="metadata[value][{{@index}}]" value="{{this}}" class="metadata-value">
            </label>
        {{/each}}
        <label>
            <input type="text" name="metadata[name][]" value="" class="metadata-name" placeholder="New metadata">
            <input type="text" name="metadata[value][]" value="" class="metadata-value">
        </label>
    </div>
</form>

<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="/edit.js"></script>