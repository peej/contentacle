<header>
    <div>
        <h1>
            <a href="{{_links.cont:user.href}}" rel="cont:user">{{username}}</a> /
            <a href="{{_links.cont:repo.href}}" rel="cont:repo">{{repo}}</a> /
            <a href="{{_links.cont:branch.href}}" rel="cont:branch">{{branch}}</a>
            {{#if path}}/ {{path}}{{/if}}
            <input id="filename" type="text" name="filename" placeholder="filename" value="" form="commit-form" required>
        </h1>
    </div>
</header>

<textarea name="content" id="edit" form="commit-form" autofocus>{{content}}</textarea>
<div id="preview" form="commit-form">{{markdown content}}</div>

<form action="{{_links.self.href}}" method="post" id="commit-form">
    <div id="commit">
        <h1>Commit</h1>
        <p>Some words about your changes.</p>
        <textarea name="message" placeholder="Update to {{path}}"></textarea>
        <button type="submit">Commit changes</button>
        <h2>Metadata</h2>
        {{#each metadata}}
            <label>
                <input type="text" name="metadata[name][{{@index}}]" value="{{capitalise @key}}" class="metadata-name">
                <input type="text" name="metadata[value][{{@index}}]" value="{{this}}" class="metadata-value">
            </label>
        {{/each}}
        <label>
            <input type="text" name="metadata[name][]" value="" class="metadata-name" placeholder="New metadata">
            <input type="text" name="metadata[value][]" value="" class="metadata-value">
        </label>
    </div>
</form>

<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="/edit.js"></script>